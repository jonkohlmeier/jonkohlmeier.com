---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import SiteLayout from './SiteLayout.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage, heroAlt } = Astro.props;
---

<SiteLayout title={`${title} Â· Puffs of Smoke`} description={description} image={heroImage}>
  <main class="article-layout mx-auto max-w-5xl px-5 py-20 lg:py-24 xl:px-0">
    <article class="article-panel relative overflow-hidden rounded-[2.5rem] border border-[var(--color-border-strong)] bg-[var(--color-surface)]/94 px-6 py-12 shadow-[var(--shadow-soft)] lg:px-14">
      <div class="article-panel__glow" aria-hidden="true"></div>
      <header class="article-header space-y-6">
        <p class="article-eyebrow">Thought</p>
        <h1 class="article-title">{title}</h1>
        <div class="article-meta">
          <FormattedDate date={pubDate} />
          {updatedDate && (
            <span class="inline-flex items-center gap-2">
              <span class="article-meta__divider" aria-hidden="true"></span>
              Updated <FormattedDate date={updatedDate} />
            </span>
          )}
        </div>
      </header>

      {heroImage && (
        <div class="article-hero-image">
          <Image
            src={heroImage}
            alt={heroAlt ?? ''}
            widths={[640, 960, 1280]}
            sizes="(min-width: 1024px) 960px, 100vw"
            class="h-auto w-full"
          />
        </div>
      )}

      <div class="article-content prose max-w-none space-y-6">
        <slot />
      </div>
    </article>
  </main>
</SiteLayout>
