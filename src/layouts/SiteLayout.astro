---
import type { ImageMetadata } from 'astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import BaseHead from '../components/BaseHead.astro';

interface Props {
  title: string;
  description: string;
  image?: ImageMetadata;
  showHeader?: boolean;
  className?: string;
}

const { title, description, image, showHeader = true, className } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} image={image} />
    <script is:inline>
      const storedTheme = localStorage.getItem('theme');
      const preferred = storedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.dataset.theme = preferred;
    </script>
  </head>
  <body>
    <a
      href="#page-content"
      class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-50 focus:rounded-full focus:bg-[var(--color-accent)] focus:px-4 focus:py-2 focus:text-sm focus:font-semibold focus:text-[var(--color-accent-contrast)]"
    >
      Skip to content
    </a>
    {showHeader && <Header />}
    <main id="page-content" class={`min-h-screen ${className ?? ''}`}>
      <slot />
    </main>
    <Footer />
  </body>
</html>
