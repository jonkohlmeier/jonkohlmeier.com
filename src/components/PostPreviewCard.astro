---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
---

<article class="post-card card" data-testid="post-card">
  <div class="post-card__meta">
    {post.data.categories?.[0] && (
      <span class="post-card__category">{post.data.categories[0]}</span>
    )}
    <span class="post-card__date">
      <FormattedDate date={post.data.pubDate} />
    </span>
  </div>
  <div class="post-card__body">
    <h3 class="post-card__title">
      <a class="post-card__title-link" href={`/blog/${post.id}/`}>
        {post.data.title}
      </a>
    </h3>
    <p class="post-card__description">{post.data.description}</p>
  </div>
  {post.data.tags && (
    <div class="post-card__tags">
      <p class="post-card__tags-label">Tags</p>
      <div class="post-card__tags-list">
        {post.data.tags.map((tag) => (
          <span class="post-card__tag">{tag}</span>
        ))}
      </div>
    </div>
  )}
  <a class="post-card__cta" href={`/blog/${post.id}/`}>
    Read thought
    <span aria-hidden="true">â†’</span>
  </a>
</article>
