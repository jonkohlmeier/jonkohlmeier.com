---
import type { ImageMetadata } from 'astro';

interface CTA {
  label: string;
  href: string;
  variant?: 'primary' | 'secondary';
}

interface Props {
  eyebrow?: string;
  title: string;
  description?: string;
  primaryCta?: CTA;
  secondaryCta?: CTA;
  image?: ImageMetadata;
}

const { eyebrow, title, description, primaryCta, secondaryCta, image } = Astro.props;
const hasAsideSlot = Astro.slots.has('aside');
---

<section class="hero-section section-gap relative overflow-hidden">
  <div class="hero-gradient"></div>
  <div class="hero-smoke hero-smoke--left"></div>
  <div class="hero-smoke hero-smoke--right"></div>
  <div class="smoke-watermark smoke-watermark--wide smoke-watermark--hero-top"></div>
  <div class="smoke-watermark smoke-watermark--hero-bottom"></div>
  <div class="container-page grid gap-12 lg:grid-cols-[minmax(0,1.2fr),minmax(0,0.8fr)] lg:items-center">
    <div class="space-y-6" style="max-width: 60ch;">
      {eyebrow && <span class="badge">{eyebrow}</span>}
      <h1 class="hero-heading">{title}</h1>
      {description && <p class="text-lg text-subtle">{description}</p>}
      {(primaryCta || secondaryCta) && (
        <div class="flex flex-wrap gap-3">
          {primaryCta && (
            <a class="btn btn-primary" href={primaryCta.href}>
              {primaryCta.label}
            </a>
          )}
          {secondaryCta && (
            <a
              class={`btn ${secondaryCta.variant === 'secondary' ? 'btn-secondary' : 'btn-ghost'}`}
              href={secondaryCta.href}
            >
              {secondaryCta.label}
            </a>
          )}
        </div>
      )}
      <slot name="extra" />
    </div>
    {(hasAsideSlot || image) && (
      <div class="card-muted relative overflow-hidden">
        <slot name="aside">
          {image && (
            <img
              src={image.src}
              width={image.width}
              height={image.height}
              alt={image.attributes?.alt ?? ''}
              class="hero-portrait h-auto w-full"
              loading="lazy"
            />
          )}
        </slot>
        <div class="pointer-events-none absolute inset-0 rounded-[var(--radius-card)] shadow-[var(--shadow-inner)]"></div>
      </div>
    )}
  </div>
</section>
