---
import { getCollection } from 'astro:content';
import SiteLayout from '../../layouts/SiteLayout.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import ContentGrid from '../../components/ContentGrid.astro';
import PostPreviewCard from '../../components/PostPreviewCard.astro';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<SiteLayout
  title="Writing · Puffs of Smoke"
  description="Thoughts, field notes, and dispatches on RevOps, leadership, and the craft of building teams."
>
  <section class="section-gap">
    <div class="container-page space-y-10">
      <SectionHeader
        eyebrow="Puffs from the Study"
        title="Pull up a chair"
        description="Long-form reflections on work, faith, and the craft of making things better. These pieces usually begin in conversation, stretch out over coffee, and settle in only when they’re worth sharing."
        align="center"
      />
      <ContentGrid>
        {posts.map((post) => (
          <PostPreviewCard post={post} />
        ))}
      </ContentGrid>
    </div>
  </section>
</SiteLayout>
