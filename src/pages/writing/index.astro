---
import { getCollection } from 'astro:content';
import SiteLayout from '../../layouts/SiteLayout.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import ContentGrid from '../../components/ContentGrid.astro';
import PostPreviewCard from '../../components/PostPreviewCard.astro';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<SiteLayout
  title="Writing · Puffs of Smoke"
  description="Essays, field notes, and dispatches on RevOps, leadership, and the craft of building teams."
>
  <section class="section-gap">
    <div class="container-page space-y-10">
      <SectionHeader
        eyebrow="Writing"
        title="Field notes from the RevOps pipe bench"
        description="Structured essays, strategy breakdowns, and occasional riffs on coffee or pipe tobacco—always tied back to helping operators lead with craft."
        align="center"
      />
      <ContentGrid>
        {posts.map((post) => (
          <PostPreviewCard post={post} />
        ))}
      </ContentGrid>
    </div>
  </section>
</SiteLayout>
